<!-- only show the updated <script> part and necessary input changes -->
<!-- hide the pip value input -->
<style>
  #pipVal, label[for="pipVal"] { display: none; }
</style>

<script>
const DEFAULTS = {
  EURUSD: 10, GBPUSD: 10, AUDUSD: 10, NZDUSD: 10,
  USDJPY: 9.1, USDCAD: 10, USDCHF: 10,
  EURGBP: 10, EURJPY: 9.1, GBPJPY: 9.1,
  CADJPY: 9.1, AUDJPY: 9.1, NZDJPY: 9.1,
  GBPCHF: 10, EURCHF: 10,
  XAUUSD: 1.0, XAGUSD: 0.05,
  SPX500: 0.5, US30: 1.0, NAS100: 0.2
};

const REF_ORDER = [
  'EURUSD','GBPUSD','AUDUSD','NZDUSD','USDJPY','USDCAD','USDCHF',
  'EURGBP','EURJPY','GBPJPY','CADJPY','AUDJPY','NZDJPY','GBPCHF','EURCHF',
  'XAUUSD','XAGUSD','SPX500','US30','NAS100'
];

document.addEventListener('DOMContentLoaded', () => {
  const instrument = document.getElementById('instrument');
  const calcBtn = document.getElementById('calcBtn');
  const clearBtn = document.getElementById('clearBtn');
  const out = document.getElementById('resultText');

  // build instrument dropdown
  instrument.innerHTML = REF_ORDER.map(k=>{
    const labels = {
      EURUSD:'EUR / USD', GBPUSD:'GBP / USD', AUDUSD:'AUD / USD', NZDUSD:'NZD / USD',
      USDJPY:'USD / JPY', USDCAD:'USD / CAD', USDCHF:'USD / CHF',
      EURGBP:'EUR / GBP', EURJPY:'EUR / JPY', GBPJPY:'GBP / JPY',
      CADJPY:'CAD / JPY', AUDJPY:'AUD / JPY', NZDJPY:'NZD / JPY',
      GBPCHF:'GBP / CHF', EURCHF:'EUR / CHF',
      XAUUSD:'Gold XAU / USD', XAGUSD:'Silver XAG / USD',
      SPX500:'S&P 500', US30:'Dow 30', NAS100:'Nasdaq 100'
    };
    return `<option value="${k}">${labels[k] || k}</option>`;
  }).join('');

  function formatMoney(n){ return '$' + Number(n).toFixed(2); }

  function calculate(){
    const account = parseFloat(document.getElementById('account').value) || 0;
    const riskPct = parseFloat(document.getElementById('riskPercent').value) || 0;
    const riskAmt = parseFloat(document.getElementById('riskAmount').value) || 0;
    const stopPips = parseFloat(document.getElementById('stopPips').value) || 0;
    const instr = instrument.value || REF_ORDER[0];

    const usePercent = (riskPct>0 && riskAmt===0) || (document.getElementById('riskPercent').value.trim() !== '' && document.getElementById('riskAmount').value.trim() === '');
    const riskUSD = usePercent ? account*(riskPct/100) : riskAmt;
    const pipVal = DEFAULTS[instr];

    if(account <= 0 || stopPips <= 0 || pipVal <= 0 || riskUSD <= 0){
      out.innerHTML = '<div style="color:#6b7280">Fill valid numbers above 0 for account, stop and risk.</div>';
      return;
    }

    const lot = +(riskUSD / (stopPips * pipVal)).toFixed(4);

    out.innerHTML = `
      <div><span style="color:#6b7280">Risk:</span> <strong>${formatMoney(riskUSD)}</strong></div>
      <div><span style="color:#6b7280">Suggested lot size:</span> <strong>${lot}</strong></div>
    `;
  }

  calcBtn.addEventListener('click', calculate);
  clearBtn.addEventListener('click', () => {
    document.getElementById('account').value='';
    document.getElementById('riskPercent').value='';
    document.getElementById('riskAmount').value='';
    document.getElementById('stopPips').value='';
    out.innerHTML = '<div style="color:#6b7280">Result shows here after you hit Calculate.</div>';
  });

  // optional: press Enter on inputs to calculate
  ['account','riskPercent','riskAmount','stopPips'].forEach(id=>{
    const el = document.getElementById(id);
    el.addEventListener('keydown', e => { if(e.key==='Enter'){ e.preventDefault(); calculate(); } });
  });
});
                                                            </script>
                                                            
